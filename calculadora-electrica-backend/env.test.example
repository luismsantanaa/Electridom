# ========================================
# CONFIGURACIÓN DE TESTING - CALCULADORA ELÉCTRICA RD
# ========================================
# Copia este archivo como .env.test y ajusta los valores según tu entorno

# ========================================
# CONFIGURACIÓN GENERAL PARA TESTING
# ========================================
NODE_ENV=test

# Puerto para tests (diferente al de desarrollo)
PORT=3001

# Nivel de logging para tests
LOG_LEVEL=error

# ========================================
# CONFIGURACIÓN DE BASE DE DATOS DE PRUEBA
# ========================================
# Host de la base de datos de prueba
TEST_DB_HOST=localhost

# Puerto de la base de datos de prueba
TEST_DB_PORT=3306

# Usuario de la base de datos de prueba
TEST_DB_USERNAME=electridom

# Contraseña de la base de datos de prueba
TEST_DB_PASSWORD=electridom

# Nombre de la base de datos de prueba (copia de la de producción)
TEST_DB_NAME=electridom_test

# ========================================
# CONFIGURACIÓN JWT PARA TESTING
# ========================================
# Clave secreta para JWT en testing (NO usar en producción)
TEST_JWT_SECRET=test-jwt-secret-key-for-testing-only

# Tiempo de expiración del token JWT para testing
TEST_JWT_EXPIRES_IN=1h

# ========================================
# CONFIGURACIÓN DE SEGURIDAD PARA TESTING
# ========================================
# Clave API para testing
TEST_API_KEY=test-api-key

# Origen permitido para CORS en testing
TEST_CORS_ORIGIN=*

# ========================================
# CONFIGURACIÓN DE RATE LIMITING PARA TESTING
# ========================================
# Tiempo de vida de la ventana de rate limiting para testing (más permisivo)
TEST_RATE_LIMIT_TTL=60

# Número máximo de requests por ventana para testing (más permisivo)
TEST_RATE_LIMIT_LIMIT=1000

# Rate limiting específico para autenticación en testing
TEST_AUTH_THROTTLE_LIMIT=10

# ========================================
# CONFIGURACIÓN DE CACHE PARA TESTING
# ========================================
# Tiempo de vida del cache de reglas para testing (ms)
TEST_RULE_CACHE_TTL_MS=1000

# ========================================
# CONFIGURACIÓN DE BASE DE DATOS PRINCIPAL (para copiar)
# ========================================
# Estas variables se usan para copiar la estructura de la base de datos principal
DATABASE_HOST=localhost
DATABASE_PORT=3306
DATABASE_USERNAME=electridom
DATABASE_PASSWORD=electridom
DATABASE_NAME=electridom

# ========================================
# NOTAS IMPORTANTES PARA TESTING
# ========================================
# 1. La base de datos de prueba se crea como copia de la de producción
# 2. Los tests usan sincronización automática (synchronize: true)
# 3. Los rate limits son más permisivos para evitar falsos positivos
# 4. El JWT secret es específico para testing
# 5. Los logs están configurados para mostrar solo errores
# 6. El puerto es diferente al de desarrollo para evitar conflictos

# ========================================
# COMANDOS ÚTILES PARA TESTING
# ========================================
# npm run setup:test-db          # Configurar base de datos de prueba
# npm run test:e2e:clean         # Limpiar y configurar base de datos + ejecutar tests e2e
# npm run test:all:clean         # Configurar BD + ejecutar todos los tests
# npm run test:unit              # Solo tests unitarios
# npm run test:e2e               # Solo tests e2e
# npm run test:all               # Todos los tests

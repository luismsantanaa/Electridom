# ========================================
# CONFIGURACIÓN DE ENTORNO - CALCULADORA ELÉCTRICA RD
# ========================================
# Copia este archivo como .env y ajusta los valores según tu entorno

# ========================================
# CONFIGURACIÓN GENERAL
# ========================================
# Entorno de ejecución (development, staging, production)
NODE_ENV=development

# Puerto del servidor
PORT=3000

# Nivel de logging (error, warn, info, debug, verbose)
LOG_LEVEL=info

# ========================================
# CONFIGURACIÓN JWT
# ========================================
# Clave secreta para firmar JWT (OBLIGATORIO - Cambiar en producción)
JWT_SECRET=your-super-secret-jwt-key-change-in-production

# Tiempo de expiración del token JWT
JWT_EXPIRES_IN=900s

# ========================================
# CONFIGURACIÓN JWT RS256 + JWKS
# ========================================
# KID activo para JWT RS256
JWT_RS256_ACTIVE_KID=

# Opción A: Rutas a archivos de claves (para desarrollo)
JWT_PRIVKEY_PATH=
JWT_PUBKEY_PATH=

# Opción B: Clave de encriptación para claves privadas en DB
KEY_ENCRYPTION_SECRET=your-key-encryption-secret-change-in-production

# ========================================
# CONFIGURACIÓN DE BASE DE DATOS
# ========================================
# Host de la base de datos
DATABASE_HOST=localhost

# Puerto de la base de datos
DATABASE_PORT=3306

# Usuario de la base de datos
DATABASE_USERNAME=electridom

# Contraseña de la base de datos
DATABASE_PASSWORD=electridom

# Nombre de la base de datos
DATABASE_NAME=electridom

# URL completa de conexión (opcional, sobreescribe las configuraciones individuales)
# DATABASE_URL=mariadb://username:password@host:port/database

# ========================================
# CONFIGURACIÓN DE SEGURIDAD
# ========================================
# Clave API para endpoints administrativos (opcional)
API_KEY=your-api-key-for-admin-endpoints

# Origen permitido para CORS
CORS_ORIGIN=*

# ========================================
# CONFIGURACIÓN DE TESTING
# ========================================
# Base de datos de prueba (copia de la de producción)
TEST_DB_HOST=localhost
TEST_DB_PORT=3306
TEST_DB_USERNAME=electridom
TEST_DB_PASSWORD=electridom
TEST_DB_NAME=electridom_test

# Puerto para tests
TEST_PORT=3001

# Configuración JWT para testing
TEST_JWT_SECRET=test-jwt-secret-key-for-testing-only
TEST_JWT_EXPIRES_IN=1h

# Configuración de seguridad para testing
TEST_API_KEY=test-api-key
TEST_CORS_ORIGIN=*

# Rate limiting para testing (más permisivo)
TEST_RATE_LIMIT_TTL=60
TEST_RATE_LIMIT_LIMIT=1000
TEST_AUTH_THROTTLE_LIMIT=10

# Cache para testing
TEST_RULE_CACHE_TTL_MS=1000

# ========================================
# CONFIGURACIÓN SSL (Solo para producción)
# ========================================
# Ruta al archivo de clave privada SSL
# SSL_KEY_PATH=/path/to/private-key.pem

# Ruta al archivo de certificado SSL
# SSL_CERT_PATH=/path/to/certificate.pem

# ========================================
# CONFIGURACIÓN DE RATE LIMITING
# ========================================
# Tiempo de vida de la ventana de rate limiting (segundos)
RATE_LIMIT_TTL=60

# Número máximo de requests por ventana
RATE_LIMIT_LIMIT=100

# ========================================
# CONFIGURACIÓN DE MÉTRICAS (PROMETHEUS)
# ========================================
# Habilitar endpoint de métricas (/metrics)
METRICS_ENABLED=true

# Token opcional para proteger el endpoint de métricas (dejar vacío para desarrollo)
METRICS_TOKEN=

# ========================================
# CONFIGURACIÓN DE SWAGGER
# ========================================
# Título de la documentación API
SWAGGER_TITLE=Calculadora Eléctrica RD API

# Descripción de la API
SWAGGER_DESCRIPTION=API para cálculos eléctricos según normativas dominicanas

# Versión de la API
SWAGGER_VERSION=2.0.0

# ========================================
# CONFIGURACIONES ESPECÍFICAS POR AMBIENTE
# ========================================

# ========================================
# DESARROLLO (development)
# ========================================
# NODE_ENV=development
# LOG_LEVEL=debug
# CORS_ORIGIN=*
# DATABASE_SYNCHRONIZE=true
# DATABASE_LOGGING=true

# ========================================
# STAGING
# ========================================
# NODE_ENV=staging
# LOG_LEVEL=info
# CORS_ORIGIN=https://staging.calculadora-electrica.com
# DATABASE_SYNCHRONIZE=false
# DATABASE_LOGGING=false

# ========================================
# PRODUCCIÓN (production)
# ========================================
# NODE_ENV=production
# LOG_LEVEL=warn
# CORS_ORIGIN=https://calculadora-electrica.com
# DATABASE_SYNCHRONIZE=false
# DATABASE_LOGGING=false
# SSL_KEY_PATH=/etc/ssl/private/server.key
# SSL_CERT_PATH=/etc/ssl/certs/server.crt

# ========================================
# NOTAS IMPORTANTES
# ========================================
# 1. NUNCA subas el archivo .env al repositorio
# 2. Cambia JWT_SECRET en producción
# 3. Usa credenciales seguras en producción
# 4. Configura SSL en producción
# 5. Ajusta CORS_ORIGIN según tu dominio
# 6. Monitorea los logs en producción

# Refresh Tokens y Sesiones
REFRESH_TTL=30d
REFRESH_ROTATE=true
REFRESH_SALT=your-refresh-salt-here-make-it-long-and-random
REFRESH_COOKIE_ENABLED=false
